"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[490],{2109:(e,t,a)=>{a.d(t,{Dashboard:()=>Dashboard});var s=a(4041);const i={container:"dashboard_container__8o1AR","chart-container":"dashboard_chart-container__lx645",content:"dashboard_content__Xy2W8",title:"dashboard_title__WVoea","chart-section":"dashboard_chart-section__fzoqu",legend:"dashboard_legend__4zi8x","legend-item":"dashboard_legend-item__wLItL","legend-icon":"dashboard_legend-icon__IzG9x","table-container":"dashboard_table-container__FSiSl"};var r=a(1085);const n=s.createContext(null),l=({children:e})=>{const[t,a]=s.useState(null),[i,l]=s.useState([]),o=s.useCallback(((e,t)=>{l((a=>[...a,{id:e,ref:t}]))}),[]),d=s.useCallback((e=>{l((t=>t.filter((t=>t.id!==e))))}),[]),h=s.useCallback((e=>{var t;const a=i.find((t=>t.id===e));return null!=(t=null==a?void 0:a.ref)?t:null}),[i]),c=s.useMemo((()=>({grid:t,setGrid:a,addItemRefToList:o,removeItemRefFromList:d,itemRefList:i,getItemRefFromListById:h})),[t,i,o,d,h]);return(0,r.jsx)(n.Provider,{value:c,children:e})};var o=a(7150);const d=()=>{const e=(0,s.useContext)(n);if(!e)throw new Error("useGridstack must be used within a GridstackProvider");return e},h=({options:e,children:t})=>{const{grid:a,setGrid:i}=d(),n=s.useRef(null),l=s.useRef(e);return s.useEffect((()=>{l.current=e}),[e]),s.useLayoutEffect((()=>{if(!a&&n.current){const e=o.dn.init(l.current,n.current);i(e)}return()=>{a&&(a.removeAll(!1),a.destroy(!1),i(null))}}),[a,i]),(0,r.jsx)("div",{ref:n,children:t})},c=({initOptions:e,id:t,children:a,className:i})=>{const n=s.useRef(null),l=s.useRef(e),{grid:o,addItemRefToList:h,removeItemRefFromList:c}=d(),u=s.useRef(null);return s.useEffect((()=>{l.current=e}),[e]),s.useLayoutEffect((()=>{if(o&&n.current)return o&&n.current?(o.batchUpdate(!0),u.current=o.addWidget(n.current,l.current),o.batchUpdate(!1),h(t,u),()=>{if(o&&u.current)try{o.batchUpdate(!0),o.removeWidget(u.current,!1),o.batchUpdate(!1),c(t)}catch(e){console.error("Error removing widget",e)}}):void 0}),[o]),(0,r.jsx)("div",{ref:n,id:"",children:(0,r.jsx)("div",{className:`w-full h-full ${i}`,children:a})})};var u=a(5250);const p={w:2,h:2,minW:1,maxW:2,minH:1,maxH:2},D={cellHeight:220,columnOpts:{columnMax:4,breakpoints:[{w:1400,c:4},{w:900,c:2},{w:480,c:1}]},float:!1,margin:8,disableResize:!0};var S=a(3555),b=a(9874),E=a(7249),A=a(4206),R=a(7183);const g="pie-chart_container__HGen3";class PieChart extends s.Component{constructor(e){super(e),this.state={activeIndex:0},this.setActiveIndex=this.setActiveIndex.bind(this)}setActiveIndex(e,t){this.setState({activeIndex:t})}render(){return(0,r.jsx)(b.u,{className:g,children:(0,r.jsx)(E.r,{margin:{bottom:0,left:0,right:0,top:0},children:(0,r.jsx)(A.F,{activeIndex:this.state.activeIndex,activeShape:e=>{const t=Math.PI/180,{cx:a,cy:s,midAngle:i,innerRadius:n,outerRadius:l,startAngle:o,endAngle:d,fill:h,payload:c,percent:u,value:p}=e,D=Math.sin(-t*i),b=Math.cos(-t*i),E=a+(l+10)*b,A=s+(l+10)*D,R=a+(l+30)*b,g=s+(l+30)*D,B=R+22*(b>=0?1:-1),T=g,C=b>=0?"start":"end";return(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:a,y:s,dy:8,textAnchor:"middle",fill:h,children:c.name}),(0,r.jsx)(S.h,{cx:a,cy:s,innerRadius:n,outerRadius:l,startAngle:o,endAngle:d,fill:h}),(0,r.jsx)(S.h,{cx:a,cy:s,startAngle:o,endAngle:d,innerRadius:l+6,outerRadius:l+10,fill:h}),(0,r.jsx)("path",{d:`M${E},${A}L${R},${g}L${B},${T}`,stroke:h,fill:"none"}),(0,r.jsx)("circle",{cx:B,cy:T,r:2,fill:h,stroke:"none"}),(0,r.jsx)("text",{x:B+12*(b>=0?1:-1),y:T,textAnchor:C,fill:"#333",children:`PV ${p}`}),(0,r.jsx)("text",{x:B+12*(b>=0?1:-1),y:T,dy:18,textAnchor:C,fill:"#999",children:`(Rate ${(100*u).toFixed(2)}%)`})]})},data:this.props.data,cx:200,cy:200,innerRadius:60,outerRadius:80,dataKey:this.props.dataKey,onMouseEnter:this.setActiveIndex,children:this.props.data.map(((e,t)=>(0,r.jsx)(R.f,{fill:e.fill},`cell-${t}`)))})})})}}const B=PieChart;var T=a(6154),C=a(6421),y=a(8331),L=a(1492),_=a(7662),f=a(9631),m=a(8094);class BarChart extends s.Component{render(){return(0,r.jsx)(T.gJ.Consumer,{children:({i18n:e})=>(0,r.jsx)(b.u,{children:(0,r.jsxs)(C.E,{data:this.props.data,margin:{top:20,right:40,left:0,bottom:20},barSize:20,children:[(0,r.jsx)(y.W,{dataKey:"name",scale:"point",padding:{left:10,right:10}}),(0,r.jsx)(L.h,{}),(0,r.jsx)(_.m,{}),(0,r.jsx)(f.d,{strokeDasharray:"3 3"}),(0,r.jsx)(m.y,{dataKey:this.props.dataKey,name:e.t(this.props.datai18nKey),background:{fill:"#eee"},children:this.props.data.map(((e,t)=>(0,r.jsx)(R.f,{fill:e.fill},`cell-${t}`)))})]})})})}}const x=BarChart;var O=a(5344),N=a(1693),v=a(9928);class ScatteredChart extends s.Component{render(){return(0,r.jsx)(T.gJ.Consumer,{children:({i18n:e})=>(0,r.jsx)(b.u,{children:(0,r.jsxs)(O.t,{margin:{top:20,right:30,bottom:20,left:20},children:[(0,r.jsx)(f.d,{}),(0,r.jsx)(y.W,{type:"number",dataKey:this.props.xDataKey,name:e.t(this.props.xDatai18nKey),unit:this.props.xUnit}),(0,r.jsx)(L.h,{type:"number",dataKey:this.props.yDataKey,name:e.t(this.props.yDatai18nKey),unit:this.props.yUnit}),(0,r.jsx)(N.K,{type:"number",dataKey:this.props.zDatakey,name:e.t(this.props.zDatai18nKey),unit:this.props.zUnit,range:[100,1e3]}),(0,r.jsx)(_.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(v.X,{data:this.props.data,fill:"#8884d8",children:this.props.data.map(((e,t)=>(0,r.jsx)(R.f,{fill:e.fill},`cell-${t}`)))})]})})})}}const P=ScatteredChart;var I=a(8255),w=a(2821);class AreaChart extends s.Component{render(){return(0,r.jsx)(T.gJ.Consumer,{children:({i18n:e})=>(0,r.jsx)(b.u,{children:(0,r.jsxs)(I.Q,{width:500,height:400,data:this.props.data,margin:{top:20,right:50,left:20,bottom:20},children:[(0,r.jsx)(f.d,{strokeDasharray:"3 3"}),(0,r.jsx)(y.W,{dataKey:"name"}),(0,r.jsx)(L.h,{}),(0,r.jsx)(_.m,{}),(0,r.jsx)(w.G,{type:"monotone",dataKey:this.props.xDataKey,name:e.t(this.props.xDatai18nKey),unit:this.props.xUnit,stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),(0,r.jsx)(w.G,{type:"monotone",dataKey:this.props.yDataKey,name:e.t(this.props.yDatai18nKey),unit:this.props.yUnit,stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})]})})})}}const j=AreaChart;var V=a(8730);class DashboardRepository extends V.d{getTotalSoldByPriceBarChartOrPieChartDataQuery(){return"\n        query GetTotalSoldByPriceBarOrPieChartData{\n            GetTotalSoldByPriceBarOrPieChartData {\n                total_sold\n                name\n                fill\n            }\n        }\n        "}GetTotalSoldByPriceScatteredChartDataQuery(){return"\n            query GetTotalSoldByPriceScatteredChartData{\n                GetTotalSoldByPriceScatteredChartData {\n                    total_sold\n                    bundle_price\n                    revenue,\n                    fill\n                }\n            }\n        "}getTotalSoldAndRevenueByPriceAreaChartDataQuery(){return"\n        query GetTotalSoldAndRevenueByPriceAreaChartData{\n            GetTotalSoldAndRevenueByPriceAreaChartData {\n                total_sold\n                name\n                revenue\n            }\n        }\n        "}listBundlesQuery(){return"\n        query ListBundles($input: ListBundlesInput!) {\n            ListBundles(listBundlesInput: $input) {\n                rows {\n                bundle_id\n                name\n                discount_percentage\n                total_sold\n                bundle_price\n                }\n                totalRows\n            }\n        }\n        "}deleteBundlesQuery(){return"\n        mutation DeleteBundles($bundleIds: [String]!){\n            DeleteBundles(bundleIds: $bundleIds)\n        }\n        "}getBundleByIdQuery(){return"\n        query GetBundleById($bundleId: ID!){\n            GetBundleById(id: $bundleId) {\n                bundle_id\n                name\n                discount_percentage\n                total_sold\n                bundle_price\n                Products {\n                product_id\n                quantity\n                }\n            }\n        }\n        "}getTotalSoldByPriceBarChartOrPieChartData(){return super.watchQuery(this.getTotalSoldByPriceBarChartOrPieChartDataQuery())}getTotalSoldByPriceScatteredChartData(){return super.watchQuery(this.GetTotalSoldByPriceScatteredChartDataQuery())}getTotalSoldAndRevenueByPriceAreaChartData(){return super.watchQuery(this.getTotalSoldAndRevenueByPriceAreaChartDataQuery())}listBundles(e){return super.watchQuery(this.listBundlesQuery(),{input:e})}deleteBundles(e){return super.mutate(this.deleteBundlesQuery(),{bundleIds:e})}getBundleById(e){return super.watchQuery(this.getBundleByIdQuery(),{bundleId:e})}}var H=a(1676);let U=function(e){return e.RESET_TABLE="RESET_TABLE",e.VIEW_DETAILS="VIEW_DETAILS",e.MANAGE="MANAGE",e.DELETE="DELETE",e.SELECT="SELECT",e}({});var G=a(3722),F=a(8017),K=a(6677);const k={page:{number:1,size:F.p.TWENTY}},M=[{i18nKey:"DASHBOARD.BUNDLE_TABLE.COLUMNS.NAME",id:"DASHBOARD.BUNDLE_TABLE.COLUMNS.NAME",isSearchable:!0,isSortable:!0,name:"name"},{i18nKey:"DASHBOARD.BUNDLE_TABLE.COLUMNS.DISCOUNT_PERCENTAGE",id:"DASHBOARD.BUNDLE_TABLE.COLUMNS.DISCOUNT_PERCENTAGE",isSearchable:!0,isSortable:!0,name:"discount_percentage"},{i18nKey:"DASHBOARD.BUNDLE_TABLE.COLUMNS.TOTAL_SOLD",id:"DASHBOARD.BUNDLE_TABLE.COLUMNS.TOTAL_SOLD",isSearchable:!0,isSortable:!0,name:"total_sold"},{i18nKey:"DASHBOARD.BUNDLE_TABLE.COLUMNS.BUNDLE_PRICE",id:"DASHBOARD.BUNDLE_TABLE.COLUMNS.BUNDLE_PRICE",isSearchable:!0,isSortable:!0,name:"bundle_price",currencySymbol:"\u20b9"}],z=[{i18nKey:"DASHBOARD.BUNDLE_TABLE.FILTER.DISCOUNT_FILTER",key:"discount_percentage",data:{from:0,to:100,min:0,max:100,hasLabel:!0,step:.1},type:K.r.Between},{i18nKey:"DASHBOARD.BUNDLE_TABLE.FILTER.PRICE_FILTER",key:"bundle_price",data:{from:0,to:1e6,min:0,max:1e6},type:K.r.Between},{i18nKey:"DASHBOARD.BUNDLE_TABLE.FILTER.TOTAL_SOLD_FILTER",key:"total_sold",data:{from:0,to:1e6,min:0,max:1e6},type:K.r.Between}];var Q=a(4255),$=a(505),W=a(7973),q=a(6566),X=a(3058),Y=a(8435),J=a(9798),Z=a(3515),ee=a(7408);class BundleTable extends s.Component{constructor(e){super(e),this.dashboardRepository=void 0,this.subscriptions=void 0,this.state={tableInput:(0,u.cloneDeep)(k),tableOutput:{rows:[],totalRows:0},tableRows:[],isTableLoading:!1,selectedRows:new Set,isFilterLoading:!1,isBundleFilterOpened:!1,filterOptions:(0,u.cloneDeep)(z),isDeleteDialogOpened:!1,deleteDialogData:null,isViewDetailsOpened:!1,isViewDetailsLoading:!1},this.handleTableEvents=this.handleTableEvents.bind(this),this.handleTableFilterClose=this.handleTableFilterClose.bind(this),this.handleFilterMultiSelectionNext=this.handleFilterMultiSelectionNext.bind(this),this.handleResetTable=this.handleResetTable.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleSort=this.handleSort.bind(this),this.handlePageSizeChange=this.handlePageSizeChange.bind(this),this.handlePageNumberChange=this.handlePageNumberChange.bind(this),this.handleSelectionChange=this.handleSelectionChange.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleOpenFilter=this.handleOpenFilter.bind(this),this.handleTableFilterClose=this.handleTableFilterClose.bind(this),this.handleDeleteBundles=this.handleDeleteBundles.bind(this),this.onDeleteDialogClose=this.onDeleteDialogClose.bind(this),this.clearCacheAndRefresh=this.clearCacheAndRefresh.bind(this),this.onViewDetailsDialogClose=this.onViewDetailsDialogClose.bind(this),this.openViewDetailsDialog=this.openViewDetailsDialog.bind(this),this.dashboardRepository=new DashboardRepository(e.client),this.subscriptions=[]}handleResetTable(){let e=(0,u.cloneDeep)(k);this.setState({tableInput:e}),this.fetchBundles(e)}handleSearchChange(e){this.setState({tableRows:new Z.A(this.state.tableOutput.rows,M.filter((e=>e.isSearchable)).map((e=>e.name)),{caseSensitive:!1,sort:!1}).search(e)})}handleSort(e){let t=(0,u.cloneDeep)(this.state.tableInput);t.sort=e,this.setState({tableInput:t}),this.fetchBundles(t)}handlePageSizeChange(e){let t=(0,u.cloneDeep)(this.state.tableInput);t.page.size=e,t.page.number=1,this.setState({tableInput:t}),this.fetchBundles(t)}handlePageNumberChange(e){let t=(0,u.cloneDeep)(this.state.tableInput);t.page.number=e,this.setState({tableInput:t}),this.fetchBundles(t)}handleSelectionChange(e){this.setState({selectedRows:e})}handleSelect(e){this.setState({selectedRows:(0,u.cloneDeep)(this.state.selectedRows).add(e)})}handleOpenFilter(){this.setState({isBundleFilterOpened:!0,filterOptions:(0,u.cloneDeep)(z).map((e=>{if(this.state.tableInput.filter)switch(e.key){case"discount_percentage":if(this.state.tableInput.filter.discount_percentage)return Object.assign({},e,{data:Object.assign({},e.data,{from:this.state.tableInput.filter.discount_percentage.from,to:this.state.tableInput.filter.discount_percentage.to})});break;case"bundle_price":if(this.state.tableInput.filter.bundle_price)return Object.assign({},e,{data:Object.assign({},e.data,{from:this.state.tableInput.filter.bundle_price.from,to:this.state.tableInput.filter.bundle_price.to})});break;case"total_sold":if(this.state.tableInput.filter.total_sold)return Object.assign({},e,{data:Object.assign({},e.data,{from:this.state.tableInput.filter.total_sold.from,to:this.state.tableInput.filter.total_sold.to})})}return e}))})}clearCacheAndRefresh(){this.props.client.clearStore().then((e=>{this.fetchBundles(this.state.tableInput),this.props.fetchCharts()}))}handleDeleteBundles(e){this.setState({isTableLoading:!0});const t=this;this.subscriptions.push(this.dashboardRepository.deleteBundles(Array.from(e)).subscribe({next(a){if(a){t.props.showNotification({severity:"success",message:a.DeleteBundles});let s=(0,u.cloneDeep)(t.state.selectedRows);e.forEach((e=>s.delete(e))),t.setState({selectedRows:s}),t.clearCacheAndRefresh()}else t.props.showNotification({severity:"error",message:"INTERNAL_SERVER_ERROR"}),t.setState({isTableLoading:!1})},error(e){t.props.showNotification({severity:"error",message:e.message}),t.setState({isTableLoading:!1})}}))}handleTableEvents(e,t){switch(e){case U.RESET_TABLE:this.handleResetTable();break;case Q.B.SEARCH_CHANGE:this.handleSearchChange(t);break;case $.A.SORT_CHANGE:this.handleSort(t);break;case W.z.PAGE_SIZE_CHANGE:this.handlePageSizeChange(t);break;case W.z.PAGE_NUMBER_CHANGE:this.handlePageNumberChange(t);break;case $.A.SELECTION_CHANGE:this.handleSelectionChange(t);break;case U.SELECT:this.handleSelect(t);break;case Q.B.OPEN_FILTER:this.handleOpenFilter();break;case U.DELETE:this.setState({deleteDialogData:new Set([t]),isDeleteDialogOpened:!0});break;case W.z.ACTION_TRIGGERED:this.setState({deleteDialogData:this.state.selectedRows,isDeleteDialogOpened:!0});break;case U.MANAGE:this.props.router.navigate("/edit-bundle",{state:{bundleId:t}})}}handleTableFilterClose(e){if(e){let t=(0,u.cloneDeep)(this.state.tableInput);t.filter=e,t.sort=void 0,t.page=(0,u.cloneDeep)(k.page),this.setState({isBundleFilterOpened:!1,filterOptions:[],tableInput:t}),this.fetchBundles(t)}else this.setState({isBundleFilterOpened:!1,filterOptions:[]})}handleFilterMultiSelectionNext(e,t){}fetchBundles(e){this.setState({isTableLoading:!0,selectedRows:new Set});const t=this;this.subscriptions.push(this.dashboardRepository.listBundles(e).subscribe({next(e){null!=e&&e.ListBundles?t.setState({tableOutput:e.ListBundles,tableRows:e.ListBundles.rows,isTableLoading:!1}):t.props.showNotification({severity:"error",message:"ERRORS.ERROR_FETCHING_DATA"})},error(e){t.props.showNotification({severity:"error",message:t.dashboardRepository.errorExtracter(e)}),t.setState({tableRows:[],isTableLoading:!1})}}))}onDeleteDialogClose(e){e&&this.handleDeleteBundles(e),this.setState({isDeleteDialogOpened:!1})}openViewDetailsDialog(e){this.setState({isViewDetailsOpened:!0,isViewDetailsLoading:!0});const t=this;this.subscriptions.push(this.dashboardRepository.getBundleById(e).subscribe({next(e){e?t.setState({bundleDetails:e.GetBundleById}):t.props.showNotification({message:"INTERNAL_SERVER_ERROR",severity:"error"}),t.setState({isViewDetailsLoading:!1})},error(e){t.props.showNotification({message:t.dashboardRepository.errorExtracter(e),severity:"error"})}}))}onViewDetailsDialogClose(e){e&&this.handleSelect(e),this.setState({isViewDetailsOpened:!1})}componentDidMount(){this.fetchBundles(this.state.tableInput)}componentWillUnmount(){this.subscriptions.forEach((e=>e.unsubscribe())),this.subscriptions=[]}render(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(H.A,{headerData:{title:"DASHBOARD.BUNDLE_TABLE.TITLE",editModeList:[{i18nKey:"DASHBOARD.BUNDLE_TABLE.HEADER.ACTIONS.RESET_TABLE",action:U.RESET_TABLE,iconPosition:"start",icon:G.A}],canShowFilter:!0,isFilterApplied:this.state.tableInput.filter&&Object.keys(this.state.tableInput.filter).length>0,onTableHeaderEvents:this.handleTableEvents},rootData:{idColumnName:"bundle_id",columns:(0,u.cloneDeep)(M),rows:this.state.tableRows,actions:[{action:U.MANAGE,i18nKey:"DASHBOARD.BUNDLE_TABLE.ROW_ACTION.MANAGE"},{action:U.SELECT,i18nKey:"DASHBOARD.BUNDLE_TABLE.ROW_ACTION.SELECT"},{action:U.DELETE,i18nKey:"DASHBOARD.BUNDLE_TABLE.ROW_ACTION.DELETE",warn:!0}],hasSelect:!0,isLoading:this.state.isTableLoading,sort:this.state.tableInput.sort,selectedRows:this.state.selectedRows,onTableBodyEvents:this.handleTableEvents},footerData:{pageNumber:this.state.tableInput.page.number,pageSize:this.state.tableInput.page.size,totalRows:this.state.tableOutput.totalRows,actionButtonState:{title:"DASHBOARD.BUNDLE_TABLE.FOOTER.ACTION_BTN",isVisible:this.state.selectedRows.size>0,warn:!0},onTableFooterEvents:this.handleTableEvents},filterData:{dialogTitle:"DASHBOARD.BUNDLE_TABLE.FILTER.TITLE",isLoading:this.state.isFilterLoading,isOpened:this.state.isBundleFilterOpened,onClose:this.handleTableFilterClose,onMultiSelectionNext:this.handleFilterMultiSelectionNext,options:this.state.filterOptions}}),(0,r.jsx)(ee.N,{dialogTitle:"DASHBOARD.BUNDLE_TABLE.DELETE_BUNDLE.DIALOG.TITLE",cancelText:"DASHBOARD.BUNDLE_TABLE.DELETE_BUNDLE.DIALOG.CANCEL_TEXT",confirmText:"DASHBOARD.BUNDLE_TABLE.DELETE_BUNDLE.DIALOG.CONFIRM_TEXT",contentText:"DASHBOARD.BUNDLE_TABLE.DELETE_BUNDLE.DIALOG.CONTEXT_TEXT",isOpened:this.state.isDeleteDialogOpened,onClose:this.onDeleteDialogClose,data:this.state.deleteDialogData,warn:!0})]})}}const te={showNotification:J.P9.showNotification},ae=(0,Y.Ng)(null,te)((0,X.y)((0,q.l)(BundleTable)));class Dashboard extends s.Component{constructor(e){super(e),this.dashboardRepository=void 0,this.subscriptions=void 0,this.dashboardRepository=new DashboardRepository(e.client),this.subscriptions=[],this.state={totalSoldVsPriceRangePieChartData:{isLoading:!1,data:[]},totalSoldVsPriceRangeBarChartData:{isLoading:!1,data:[]},totalSoldVsPriceVsRevenueScatteredChartData:{isLoading:!1,data:[]},totalSoldVsRevenueVSPriceAreaChartData:{data:[],isLoading:!1}},this.fetchChartData=this.fetchChartData.bind(this),this.fetchTotalSoldVsPriceRangePieChartData=this.fetchTotalSoldVsPriceRangePieChartData.bind(this),this.fetchTotalSoldVsPriceRangeBarChartData=this.fetchTotalSoldVsPriceRangeBarChartData.bind(this),this.fetchTotalSoldVsPriceVsRevenueScatteredChartData=this.fetchTotalSoldVsPriceVsRevenueScatteredChartData.bind(this),this.fetchTotalSoldVsRevenueVSPriceAreaChartData=this.fetchTotalSoldVsRevenueVSPriceAreaChartData.bind(this)}fetchTotalSoldVsPriceRangePieChartData(){const e=this;e.setState({totalSoldVsPriceRangePieChartData:{data:[],isLoading:!0}}),this.subscriptions.push(this.dashboardRepository.getTotalSoldByPriceBarChartOrPieChartData().subscribe({next(t){t?e.setState({totalSoldVsPriceRangePieChartData:{data:t.GetTotalSoldByPriceBarOrPieChartData,isLoading:!1}}):(e.setState({totalSoldVsPriceRangePieChartData:{data:[],isLoading:!1}}),e.props.showNotification({message:"Error Fetching Data!",severity:"error"}))},error(t){e.props.showNotification({message:t,severity:"error"})}}))}fetchTotalSoldVsPriceRangeBarChartData(){const e=this;e.setState({totalSoldVsPriceRangeBarChartData:{data:[],isLoading:!0}}),this.subscriptions.push(this.dashboardRepository.getTotalSoldByPriceBarChartOrPieChartData().subscribe({next(t){t?e.setState({totalSoldVsPriceRangeBarChartData:{data:t.GetTotalSoldByPriceBarOrPieChartData,isLoading:!1}}):(e.setState({totalSoldVsPriceRangeBarChartData:{data:[],isLoading:!1}}),e.props.showNotification({message:"Error Fetching Data!",severity:"error"}))},error(t){e.props.showNotification({message:t,severity:"error"})}}))}fetchTotalSoldVsPriceVsRevenueScatteredChartData(){const e=this;e.setState({totalSoldVsPriceVsRevenueScatteredChartData:{data:[],isLoading:!0}}),this.subscriptions.push(this.dashboardRepository.getTotalSoldByPriceScatteredChartData().subscribe({next(t){t?e.setState({totalSoldVsPriceVsRevenueScatteredChartData:{data:t.GetTotalSoldByPriceScatteredChartData,isLoading:!1}}):(e.setState({totalSoldVsPriceVsRevenueScatteredChartData:{data:[],isLoading:!1}}),e.props.showNotification({message:"Error Fetching Data!",severity:"error"}))},error(t){e.props.showNotification({message:t,severity:"error"})}}))}fetchTotalSoldVsRevenueVSPriceAreaChartData(){const e=this;e.setState({totalSoldVsRevenueVSPriceAreaChartData:{data:[],isLoading:!0}}),this.subscriptions.push(this.dashboardRepository.getTotalSoldAndRevenueByPriceAreaChartData().subscribe({next(t){t?e.setState({totalSoldVsRevenueVSPriceAreaChartData:{data:t.GetTotalSoldAndRevenueByPriceAreaChartData,isLoading:!1}}):(e.setState({totalSoldVsRevenueVSPriceAreaChartData:{data:[],isLoading:!1}}),e.props.showNotification({message:"Error Fetching Data!",severity:"error"}))},error(t){e.props.showNotification({message:t,severity:"error"})}}))}fetchChartData(){this.fetchTotalSoldVsPriceRangePieChartData(),this.fetchTotalSoldVsPriceRangeBarChartData(),this.fetchTotalSoldVsPriceVsRevenueScatteredChartData(),this.fetchTotalSoldVsRevenueVSPriceAreaChartData()}componentDidMount(){this.fetchChartData()}componentWillUnmount(){this.subscriptions.forEach((e=>e.unsubscribe())),this.subscriptions=[]}render(){return(0,r.jsx)(T.gJ.Consumer,{children:({i18n:e})=>(0,r.jsx)(l,{children:(0,r.jsxs)("div",{className:i.container,children:[(0,r.jsx)("div",{className:"grid-stack-container",children:(0,r.jsxs)(h,{options:(0,u.cloneDeep)(D),children:[(0,r.jsx)(c,{className:i["chart-container"],id:"total-sold-by-price-pie-chart",initOptions:(0,u.cloneDeep)(p),children:(0,r.jsxs)("div",{className:i.content,children:[(0,r.jsx)("div",{className:i.title,children:e.t("DASHBOARD.CHART.TOTAL_SOLD_BY_PRICE_RANGE_PIE")}),(0,r.jsxs)("div",{className:i["chart-section"],children:[(0,r.jsx)(B,{dataKey:"total_sold",data:this.state.totalSoldVsPriceRangePieChartData.data}),(0,r.jsx)("div",{className:i.legend,children:this.state.totalSoldVsPriceRangePieChartData.data.map(((e,t)=>(0,r.jsxs)("div",{className:i["legend-item"],children:[(0,r.jsx)("div",{className:i["legend-icon"],style:{background:e.fill}}),(0,r.jsx)("div",{className:i["legend-label"],children:e.name})]},t)))})]})]})}),(0,r.jsx)(c,{className:i["chart-container"],id:"total-sold-by-price-bar-chart",initOptions:(0,u.cloneDeep)(p),children:(0,r.jsxs)("div",{className:i.content,children:[(0,r.jsx)("div",{className:i.title,children:e.t("DASHBOARD.CHART.TOTAL_SOLD_BY_PRICE_RANGE_BAR")}),(0,r.jsx)(x,{datai18nKey:"DASHBOARD.CHART.LABEL.TOTAL_SOLD",dataKey:"total_sold",data:this.state.totalSoldVsPriceRangeBarChartData.data})]})}),(0,r.jsx)(c,{className:i["chart-container"],id:"total-sold-by-price-scattered-chart",initOptions:(0,u.cloneDeep)(p),children:(0,r.jsxs)("div",{className:i.content,children:[(0,r.jsx)("div",{className:i.title,children:e.t("DASHBOARD.CHART.TOTAL_SOLD_BY_PRICE_RANGE_BY_REVENUE")}),(0,r.jsx)(P,{xDataKey:"total_sold",yDataKey:"bundle_price",zDatakey:"revenue",xDatai18nKey:"DASHBOARD.CHART.LABEL.TOTAL_SOLD",yDatai18nKey:"DASHBOARD.CHART.LABEL.BUNDLE_PRICE",zDatai18nKey:"DASHBOARD.CHART.LABEL.REVENUE",data:this.state.totalSoldVsPriceVsRevenueScatteredChartData.data})]})}),(0,r.jsx)(c,{className:i["chart-container"],id:"total-sold-and-revenue-by-price-area-chart",initOptions:(0,u.cloneDeep)(p),children:(0,r.jsxs)("div",{className:i.content,children:[(0,r.jsx)("div",{className:i.title,children:e.t("DASHBOARD.CHART.TOTAL_SOLD_VS_REVENUE_BY_PRICE_RANGE_AREA_CHART")}),(0,r.jsx)(j,{xDataKey:"total_sold",yDataKey:"revenue",xDatai18nKey:"DASHBOARD.CHART.LABEL.TOTAL_SOLD",yDatai18nKey:"DASHBOARD.CHART.LABEL.REVENUE",data:this.state.totalSoldVsRevenueVSPriceAreaChartData.data})]})})]})}),(0,r.jsx)("div",{className:i["table-container"],children:(0,r.jsx)(ae,{fetchCharts:this.fetchChartData})})]})})})}}}}]);